# BER 基本编码规则

<img src="BER 基本编码规则.assets/ASN.1定义的通用类型.bmp"  />

1. 基本编码规则 BER：把 ASN.1 表示的抽象类型值编码为字节串 。这种字节串的结构为**类型—长度—值** ，
   简称 TLV(Type-Length-Value) ，而值部分 value 可递归地再编码为TLV结构 
2. 第一个字节（ 8 位）为类型 TYPE，用来表示 ASN.1 类型或用户定义的类型。这个字节的<u>前两位</u>用来区
   分 4 种标签 （**00 为通用标签、 01 为应用标签， 10 位上下文专用标签、 11 为私有标签**） ；<u>第三位</u>用 **0 或 1**
   **来区分简单类型还是构造类型** ；**剩余 5 位用来表示标签值， 如果 标签的值大于 30，则这 5 位为全 1，标签**
   **值表示在后续字节中**，后续字节的左边第一位表示是否为最后一个扩充字节， 只有最后一个扩充自己的左边第一位是 0，其余扩充字节左边第一位是 1。
3. 第二个字节（ 8 位）为长度 length ，是指描述值部分 value 所占用的字节个数
   1. 定长：
      - **短类型：**当长度不大于**127个八位组**时，Length只在一个八位组中编码，用右边7位表示，最左边一位为0；
      - **长类型：**当长度大于**127个八位组**时，此时第一个八位组低七位表示的是Length所占的长度（用右边7位表示，最左边一位为0），后续表示Length。
   2. 不定长：Length所在八位组固定编码为0x80，但在Value编码结束后以两个0x00结尾。这种方式使得可以在编码没有完全结束的情况下，可以先发送部分消息给对方。